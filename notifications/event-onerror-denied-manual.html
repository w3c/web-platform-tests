<!DOCTYPE html>
<meta charset="utf-8">
<title>Notification.onerror (permission=denied)</title>
<link rel="author" title="Apple Inc." href="http://www.apple.com/">
<p id=pass style="color: green; font-weight: bold">
<p id=fail style="color: red; font-weight: bold">FAIL
<script>
if (Notification.permission != "denied") {
    alert("TEST NOT RUN. Change your browser settings so that notifications"
        + " for this origin are blocked, and then reload this page.")
} else {
    var notification = new Notification("New Email Received")
    notification.onerror = function(e) {
        if (Object.prototype.toString.call(e) == "[object Event]" &&
            e.type == "error") {
            document.querySelector("#pass").innerHTML = "PASS"
            document.querySelector("#fail").innerHTML = ""
            Notification.requestPermission()
        }
    }
}
</script>
