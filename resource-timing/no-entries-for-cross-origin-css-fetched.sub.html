<!DOCTYPE HTML>
<meta charset=utf-8>
<title>Make sure that resources fetched by cross origin CSS are not in the timeline.</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<body>
<link rel=stylesheet id=cross_origin_style href="//{{domains[www1]}}:{{ports[http][1]}}{{location[path]}}/../resources/nested.css">
<script>
  window.onload = function() {
    // A timeout is needed as PerformanceObserver is not guaranteed to run before onload triggered.
    setTimeout(function() {
      test(function(){
          let url = (new URL(document.getElementById("cross_origin_style").href));
          let prefix = url.protocol + "//" + url.host;
          assert_equals(performance.getEntriesByName(prefix + "/fonts/Ahem-crossorigin.ttf?id=n1").length, 0, "Font is in timeline");
          assert_equals(performance.getEntriesByName(prefix + "/resource-timing/resources/blue.png?id=n1").length, 0, "Image is in timeline");
      }, "Make sure that CSS subresources are not included");
    },0)
  };
</script>
<ol>Some content</ol>
</body>

