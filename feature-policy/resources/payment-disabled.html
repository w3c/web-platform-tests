<!DOCTYPE html>
<head>
<title>Feature-Policy Payment Disabled</title>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
</head>
<script>
  test(function() {
    var supportedInstruments = [ { supportedMethods: [ 'visa' ] } ];
    var details = {
      total: { label: 'Test', amount: { currency: 'USD', value: '5.00' } }
    };
    try {
      new PaymentRequest(supportedInstruments, details);
      assert_unreached('PaymentRequest should be disabled by Feature Policy');
    } catch (e) {
      if ( e.message.includes('assert_unreached') ) { throw e; }
      assert_equals(e.name, 'SecurityError');
    }
  }, 'No iframe may construct PaymentRequest when disabled by feature policy.');
</script>
