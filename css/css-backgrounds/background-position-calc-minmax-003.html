<!DOCTYPE html>

  <meta charset="UTF-8">

  <title>CSS Background and Borders Test: background-position with min and max percentages</title>

  <link rel="author" title="GÃ©rard Talbot" href="http://www.gtalbot.org/BrowserBugsSection/css21testsuite/">
  <link rel="help" href="https://www.w3.org/TR/css-backgrounds-3/#background-position">
  <link rel="help" href="https://www.w3.org/TR/css-values-4/#comp-func">

   <!--

  Issue 4227: [css-values-4] min/max(%, %) should explicitly evaluate
  against the % value, not the resolved value
  https://github.com/w3c/csswg-drafts/issues/4227

  Bug 1689244: Don't eagerly resolve min() expressions that have a
  percent value (at least not if the percent value could be resolved
  against a negative percent basis)
  https://bugzilla.mozilla.org/show_bug.cgi?id=1689244

  -->

  <link rel="match" href="reference/ref-filled-green-100px-square.xht">

  <meta content="" name="flags">
  <meta content="This test checks that when the background positioning area is smaller than the width of background image, then the 'background-position' percentage value will resolve as a negative offset. In this test, 'max(0%, 100%)' will be resolved as 'max(0px, -100px)' and 'min(0%, 100%)' will be resolved as 'min(0px, -100px)'. Therefore, the horizontal offset of the background image will be 0px (therefore the background image left edge is at the left edge of the div element) and the vertical offset of the background image will be -100px (therefore 'pushing' the background image toward the up/top side, beyond the top edge of the div element)." name="assert">

  <style>
  div
    {
      background-image: url("support/pattern-rr-gr-200x200.png");
      background-position: max(0%, 100%) min(0%, 100%);

    /*

    the first value represents the horizontal position (or offset) and (...)
    the second value represents the vertical position (or offset). The
    <length-percentage> values represent an offset of the top left
    corner of the background image from the top left corner of the
    background positioning area.

    A percentage for the horizontal offset is relative to
    (width of background positioning area - width of background image).
    A percentage for the vertical offset is relative to
    (height of background positioning area - height of background image),
    where the size of the image is the size given by background-size.

    */

      height: 100px;
      width: 100px;
    }


  /*

                   background image    background image
                  |.....................................|
                  |                                     |
                  |                                     |
                  |                                     |
                  |       red               red         | background image
                  |      area              area         |
                  |                                     |
                  |                                     |
                  |                                     |
                  !__________________!                  |
                  !                  !                  |
                  !                  !                  |
                  !                  !                  |
  div element ==> !      green       !       red        |
                  !       area       !      area        | background image
                  !                  !                  |
                  !                  !                  |
                  !                  !                  |
                  !__________________!..................|

                       div element     background image
  */

  </style>

  <p>Test passes if there is a filled green square and <strong>no red</strong>.

  <div></div>
