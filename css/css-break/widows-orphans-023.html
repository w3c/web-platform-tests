<!DOCTYPE html>

  <meta charset="UTF-8">

  <title>CSS Fragmentation level 3 Test: 'orphans', 'widows' and content distribution in columns</title>

  <link rel="author" title="GÃ©rard Talbot" href="http://www.gtalbot.org/BrowserBugsSection/css21testsuite/">
  <link rel="help" href="https://www.w3.org/TR/css-break-3/#widows-orphans">
  <link rel="match" href="reference/widows-orphans-023-ref.html">

  <!--
  Date created: November 26th 2020
  Last modified: November 27th 2020
  -->

  <!--

  Bug 137367: Implement orphans and widows
  https://bugzilla.mozilla.org/show_bug.cgi?id=137367

  -->

  <meta name="flags" content="">
  <meta name="assert" content="When column boxes are filled sequentially, their content should be distributed and fragmented in accordance with the 'orphans' and the 'widows' declarations. In the test, since the 3rd column box was going to get only 1 line box, then a class B break point should occur between the '7' and the '8' so that there is a minimum of 3 line boxes at the top of the 3rd column box. In doing so, the 'orphans: 1' declaration is still honored.">

  <!--

    Breaking at a class B break point is allowed only if (...)
    the number of line boxes between the break and the end
    of the box is the value of widows or more.
    4.4 Unforced Breaks
    https://www.w3.org/TR/css-break-3/#unforced-breaks

  -->

  <!--

  height: auto and orphans = 1 and widows = 2: widows-orphans-022.html

  height: auto and orphans = 1 and widows = 3: widows-orphans-023.html

  height: auto and orphans = 2 and widows = 2: widows-orphans-024.html

  height: auto and orphans = 2 and widows = 3: widows-orphans-025.html

  height: auto and orphans = 2 and widows = 6: widows-orphans-026.html

  height: auto and orphans = 3 and widows = 7: widows-orphans-027.html

  height: auto and orphans = 6 and widows = 4: widows-orphans-028.html

  height: auto and orphans = 7 and widows = 3: widows-orphans-029.html



  height: 104px and orphans = 1 and widows = 2: widows-orphans-032.html

  height: 104px and orphans = 1 and widows = 3: widows-orphans-033.html

  height: 104px and orphans = 2 and widows = 2: widows-orphans-034.html

  height: 104px and orphans = 2 and widows = 3: widows-orphans-035.html

  height: 156px and orphans = 2 and widows = 6: widows-orphans-036.html

  height: 208px and orphans = 3 and widows = 7: widows-orphans-037.html

  height: 234px and orphans = 6 and widows = 4: widows-orphans-038.html

  height: 234px and orphans = 7 and widows = 3: widows-orphans-039.html

  -->

  <style>
  div
    {
      border: orange solid 4px;
      font-size: 20px;
      height: auto;
      line-height: 1.3; /* computes to 26px */
      margin-bottom: 1em;
      padding: 0.5em; /* computes to 10px */
      width: 460px;

      columns: 4 auto;

      column-fill: auto;

      column-gap: 1em; /* computes to 20px */

      column-rule: blue solid 4px;
    }

  div#test
    {
      orphans: 1;
      widows: 3;

      /*
      "The widows property specifies the minimum number of line boxes of a
      block container that must be left in a fragment <em>after</em> a
      column break <strong>at the top of a column box</strong>."

      coming from
      CSS Fragmentation Module Level 3, section 3.3 Breaks Between Lines: orphans, widows
      https://www.w3.org/TR/css-break-3/#widows-orphans
      */
    }

  div#reference
    {
      height: 78px;
      orphans: 1;
      widows: 1;
    }
  </style>

   <p>Test passes if the digits inside both orange-bordered rectangles are <strong>distributed identically</strong>.

  <div id="test">1<br>2<br>3<br>4<br>5<br>6<br>7</div>


  <div id="reference">1<br>2<br>3<br>4<br><br><br>5<br>6<br>7</div>

 <!-- Same as #test except 2 extra br here ^    -->
