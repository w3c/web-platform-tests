<!DOCTYPE html>
<meta charset="utf-8">
<title>Presentation API IDL tests for Controlling User Agent</title>
<link rel="author" title="Louay Bassbouss" href="http://www.fokus.fraunhofer.de">
<link rel="help" href="http://w3c.github.io/presentation-api/#dfn-controlling-user-agent">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/WebIDLParser.js"></script>
<script src="/resources/idlharness.js"></script>

<script>
  "use strict";

  promise_test(async () => {
    const idl_array = new IdlArray();
    const idl = await fetch("/interfaces/presentation-api.idl").then(r => r.text());
    const dom = await fetch("/interfaces/dom.idl").then(r => r.text());
    const html = await fetch("/interfaces/html.idl").then(r => r.text());

    idl_array.add_idls(idl);
    idl_array.add_dependency_idls(dom);
    idl_array.add_dependency_idls(html);

    window.presentation_request = new PresentationRequest("/presentation-api/receiving-ua/idlharness.html");
    window.presentation_request_urls = new PresentationRequest([
      "/presentation-api/receiving-ua/idlharness.html",
      "https://www.example.com/presentation.html"
    ]);
    navigator.presentation.defaultRequest = presentation_request;

    idl_array.add_objects({
        Presentation: ['navigator.presentation'],
        PresentationRequest: ['navigator.presentation.defaultRequest', 'presentation_request', 'presentation_request_urls']
    });
    idl_array.test();
  }, "Test IDL implementation of Presentation API");
</script>
