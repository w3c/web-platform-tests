<!DOCTYPE html>
<meta charset=utf-8>
<title>template element: cloning steps</title>
<link rel="author" title="Denis Ah-Kang" href="mailto:denis@w3.org">
<link rel=help href="http://www.w3.org/html/wg/drafts/html/master/#the-template-element">
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<div id="log"></div>
<nav>
  <ul>
    <template id=menu>
      <li><a></a></li>
    </template>
  </ul>
</nav>

<script>
  var template = document.querySelector('#menu');
  test(function(){
    assert_true(template.content.ownerDocument instanceof HTMLDocument);
  }, "ownerDocument is an HTML Document");

  var clone = template.content.cloneNode(true);
  for (var i = 0, j = template.content.children.length; i < j; i++) {
    test(function(){
      assert_equals(template.content.children[i].ownerDocument, clone.ownerDocument);
    }, "child " + i + " of a template and the cloned node should have the same ownerDocument ");
  }

  var menuitems = [ { text: "menu1", href: "http://example.com/menu/1.html" }, { text: "menu2", href: "http://example.com/menu/2.html" } ];
  for (var i = 0; i < menuitems.length; i += 1) {
    var item = menuitems[i];
    var clone = template.content.cloneNode(true);
    var hyperlink = clone.querySelector('a');
    hyperlink.textContent = item.text;
    hyperlink.href = item.href;
    template.parentNode.appendChild(clone);
  }

  var m = document.querySelectorAll("nav > ul > li");
  test(function(){
    assert_equals(m.length, menuitems.length);
  }, "menu has 2 menu items");

  for (var i = 0, j = m.length; i < j; i++) {
    test(function(){
      assert_equals(m[i].firstChild.textContent, menuitems[i].text);
      assert_equals(m[i].firstChild.href, menuitems[i].href);
    }, "menu child " + i + " cloned from template contents");
  }
</script>
