<!DOCTYPE html>
<title>HTMLBodyElement event handlers</title>

<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script src="/resources/WebIDLParser.js"></script>
<script src="resources/event-handler-body.js"></script>
<div id="log"></div>
<body>
<script>
setup({ explicit_done: true });

function f() {
  return 0;
}

handlersListPromise.then(({ shadowedHandlers, notShadowedHandlers }) => {
  shadowedHandlers.forEach(function(handler) {
    test(function() {
      document.body['on' + handler] = f;
      assert_equals(window['on' + handler], f);
    }, "shadowed " + handler);
  });
  notShadowedHandlers.forEach(function(handler) {
    test(function() {
      document.body['on' + handler] = f;
      assert_equals(window['on' + handler], null);
    }, "not shadowed " + handler);
  });

  [...shadowedHandlers, ...notShadowedHandlers].forEach(function(handler) {
    document.body['on' + handler] = null;
  });

  shadowedHandlers.forEach(function(handler) {
    test(function() {
      assert_equals(document.body['on' + handler], null);
      assert_equals(window['on' + handler], null);
    }, "shadowed " + handler + " removal");
  });

  done();
});
</script>
