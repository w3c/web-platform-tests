<!doctype html>
<meta charset=utf-8>
<!-- WARNING: These tests are preliminary and probably partly incorrect.  -->
<title>HTML IDL tests</title>
<meta name=timeout content=long>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src=/resources/WebIDLParser.js></script>
<script src=/resources/idlharness.js></script>

<h1>HTML IDL tests</h1>
<div id=log></div>

<script>
"use strict";

function doTest(dom) {
  var idlArray = new IdlArray();
  idlArray.add_untested_idls(dom);
  idlArray.add_idls('interface HTMLAllCollection {};');
  idlArray.add_idls('partial interface Document { readonly attribute HTMLAllCollection all; };');

  idlArray.add_objects({
    XMLDocument: ['document.implementation.createDocument(null, "", null)'],
  });
  idlArray.test();
};

promise_test(function() {
  // Have to wait for onload
  return fetch("/interfaces/dom.idl")
    .then(response => response.text())
    .then(doTest);
}, "Test driver");

</script>
