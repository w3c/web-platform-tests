<!doctype html>
<meta charset=utf-8>
<meta content=timeout value=long>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src="/common/get-host-info.sub.js"></script>
<script src="resources/common.js"></script>

<div id=log></div>
<script>
[
{
  iframe_origin: SAME_ORIGIN,
  popup_origin: SAME_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: SAME_SITE,
  popup_origin: SAME_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: CROSS_ORIGIN,
  popup_origin: SAME_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: SAME_ORIGIN,
  popup_origin: SAME_SITE,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: SAME_SITE,
  popup_origin: SAME_SITE,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: CROSS_ORIGIN,
  popup_origin: SAME_SITE,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: SAME_ORIGIN,
  popup_origin: CROSS_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: SAME_SITE,
  popup_origin: CROSS_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
{
  iframe_origin: CROSS_ORIGIN,
  popup_origin: CROSS_ORIGIN,
  popup_coop: "same-origin",
  expects_opener: false,
  expects_name: false
},
].forEach( value => {
    run_coop_test_iframe("same-origin-allow-popups", value.iframe_origin, value.popup_origin,  value.popup_coop, value.expects_opener, value.expects_name);
});


</script>