<!doctype html>
<meta charset=utf-8>
<title>idlharness test</title>
<script src=/resources/testharness.js></script>
<script src=/resources/testharnessreport.js></script>
<script src="/resources/WebIDLParser.js"></script>
<script src="/resources/idlharness.js"></script>

<script>
  promise_test(async() => {
    const srcs = ['pointerevents', 'uievents', 'html', 'dom'];
    const [idl, uievents, html, dom] = await Promise.all(
      srcs.map(i => fetch(`/interfaces/${i}.idl`).then(r => r.text())));

    const idl_array = new IdlArray();
    idl_array.add_idls(idl);
    idl_array.add_dependency_idls(uievents);
    idl_array.add_dependency_idls(html);
    idl_array.add_dependency_idls(dom);

    idl_array.add_objects({
      PointerEvent: ['new PointerEvent("event")'],
      Navigator: ['window.navigator']
    });
    idl_array.test();
  }, 'pointerevents interfaces');
</script>
